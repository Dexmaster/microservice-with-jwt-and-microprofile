!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.httpSignaturesJs={},null)}(this,function(t,r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var e=function(n){function t(t,e){var r=n.call(this,t)||this;return r.cause=e,r}return i(t,n),t}(Error),y=function(r){function t(t,e){return r.call(this,t,e)||this}return i(t,r),t}(e),o=function(r){function t(t,e){return r.call(this,t,e)||this}return i(t,r),t}(y),m=function(){function n(t,e,r){this.HMAC_SHA1=new n("HmacSHA1","hmac-sha1","Mac.class"),this.HMAC_SHA224=new n("HmacSHA224","hmac-sha224","Mac.class"),this.HMAC_SHA256=new n("HmacSHA256","hmac-sha256","Mac.class"),this.HMAC_SHA384=new n("HmacSHA384","hmac-sha384","Mac.class"),this.HMAC_SHA512=new n("HmacSHA512","hmac-sha512","Mac.class"),this.RSA_SHA1=new n("SHA1withRSA","rsa-sha1","java.security.Signature.class"),this.RSA_SHA256=new n("SHA256withRSA","rsa-sha256","java.security.Signature.class"),this.RSA_SHA384=new n("SHA384withRSA","rsa-sha384","java.security.Signature.class"),this.RSA_SHA512=new n("SHA512withRSA","rsa-sha512","java.security.Signature.class"),this.DSA_SHA1=new n("SHA1withDSA","dsa-sha1","java.security.Signature.class"),this.DSA_SHA224=new n("SHA224withDSA","dsa-sha224","java.security.Signature.class"),this.DSA_SHA256=new n("SHA256withDSA","dsa-sha256","java.security.Signature.class"),this.ECDSA_SHA1=new n("SHA1withECDSA","ecdsa-sha1","java.security.Signature.class"),this.ECDSA_SHA256=new n("SHA256withECDSA","ecdsa-sha256","java.security.Signature.class"),this.ECDSA_SHA384=new n("SHA384withECDSA","ecdsa-sha384","java.security.Signature.class"),this.ECDSA_SHA512=new n("SHA512withECDSA","ecdsa-sha512","java.security.Signature.class"),this.portableName=t,this.jmvName=e,this.type=r,n.values.push(this),n.aliases[n.normalize(t)]=this,n.aliases[n.normalize(e)]=this}return n.prototype.getPortableName=function(){return this.portableName},n.prototype.getJmvName=function(){return this.jmvName},n.prototype.getType=function(){return this.type},n.getValues=function(){return n.values||[]},n.toPortableName=function(t){return n.get(t).getPortableName()},n.toJvmName=function(t){return n.get(t).getJmvName()},n.get=function(t){var e=n.getValues()[n.normalize(t)];if(null!=e)return e;throw new o(t)},n.normalize=function(t){return t.replace(new RegExp("[^A-Za-z0-9]+","g"),"").toLowerCase()},n.prototype.toString=function(){return this.getPortableName()},n.values=[],n.aliases={},n}(),b=function(){function t(){}return t.arraycopy=function(t,e,r,n,i){if(t!==r||e+i<=n)for(;0<=--i;)r[n++]=t[e++];else for(var o=t.slice(e,e+i),a=0;a<i;a++)r[n++]=o[a]},t}(),a=function(){function m(){}return Object.defineProperty(m,"base64Alphabet",{get:function(){for(var t=[],e=0;e<m.BASELENGTH;e++)t[e]=-1;for(e="Z".charCodeAt(0);e>="A".charCodeAt(0);e--)t[e]=e-"A".charCodeAt(0)|0;for(e="z".charCodeAt(0);e>="a".charCodeAt(0);e--)t[e]=e-"a".charCodeAt(0)+26|0;for(e="9".charCodeAt(0);e>="0".charCodeAt(0);e--)t[e]=e-"0".charCodeAt(0)+52|0;return t["+".charCodeAt(0)]=62,t["/".charCodeAt(0)]=63,t},enumerable:!0,configurable:!0}),Object.defineProperty(m,"lookUpBase64Alphabet",{get:function(){for(var t=[],e=0;e<=25;e++)t[e]="A".charCodeAt(0)+e|0;e=26;for(var r=0;e<=51;e++,r++)t[e]="a".charCodeAt(0)+r|0;for(e=52,r=0;e<=61;e++,r++)t[e]="0".charCodeAt(0)+r|0;return t[62]="+".charCodeAt(0),t[63]="/".charCodeAt(0),t},enumerable:!0,configurable:!0}),m.isBase64=function(t){return t===m.PAD||!(t<0||-1===m.base64Alphabet[t])},m.encodeBase64=function(t,e){void 0===e&&(e=!1);var r,n=t.length*m.EIGHTBIT,i=n%m.TWENTYFOURBITGROUP,o=n/m.TWENTYFOURBITGROUP|0,a=0,u=0;a=0!=i?4*(1+o):4*o,e&&(a+=(u=0===m.CHUNK_SEPARATOR.length?0:0|Math.ceil(a/m.CHUNK_SIZE))*m.CHUNK_SEPARATOR.length),r=[];var s,c=0,h=0,f=0,l=0,p=0,g=0,S=0,d=m.CHUNK_SIZE,v=0;for(s=0;s<o;s++){f=t[S=3*s],l=t[S+1],p=t[S+2],h=15&l|0,c=3&f|0;var E=0==(f&m.SIGN)?f>>2|0:f>>2^192|0,A=0==(l&m.SIGN)?l>>4|0:l>>4^240|0,y=0==(p&m.SIGN)?p>>6|0:p>>6^252|0;r[g]=m.lookUpBase64Alphabet[E],r[g+1]=m.lookUpBase64Alphabet[A|c<<4],r[g+2]=m.lookUpBase64Alphabet[h<<2|y],r[g+3]=m.lookUpBase64Alphabet[63&p],g+=4,e&&g===d&&(b.arraycopy(m.CHUNK_SEPARATOR,0,r,g,m.CHUNK_SEPARATOR.length),d=m.CHUNK_SIZE*(++v+1)+v*m.CHUNK_SEPARATOR.length,g+=m.CHUNK_SEPARATOR.length)}if(S=3*s,i===m.EIGHTBIT){c=3&(f=t[S])|0;E=0==(f&m.SIGN)?f>>2|0:f>>2^192|0;r[g]=m.lookUpBase64Alphabet[E],r[g+1]=m.lookUpBase64Alphabet[c<<4],r[g+2]=m.PAD,r[g+3]=m.PAD}else if(i===m.SIXTEENBIT){f=t[S],h=15&(l=t[S+1])|0,c=3&f|0;E=0==(f&m.SIGN)?f>>2|0:f>>2^192|0,A=0==(l&m.SIGN)?l>>4|0:l>>4^240|0;r[g]=m.lookUpBase64Alphabet[E],r[g+1]=m.lookUpBase64Alphabet[A|c<<4],r[g+2]=m.lookUpBase64Alphabet[h<<2],r[g+3]=m.PAD}return e&&v<u&&b.arraycopy(m.CHUNK_SEPARATOR,0,r,a-m.CHUNK_SEPARATOR.length,m.CHUNK_SEPARATOR.length),r},m.decodeBase64=function(t){if(0===(t=m.discardNonBase64(t)).length)return[];for(var e,r=t.length/m.FOURBYTE|0,n=0,i=0,o=0,a=0,u=0,s=0,c=0,h=0,f=t.length;t[f-1]===m.PAD;)if(0==--f)return[];e=[];for(var l=0;l<r;l++)u=t[(h=4*l)+2],s=t[h+3],n=m.base64Alphabet[t[h]],i=m.base64Alphabet[t[h+1]],u!==m.PAD&&s!==m.PAD?(o=m.base64Alphabet[u],a=m.base64Alphabet[s],e[c]=n<<2|i>>4|0,e[c+1]=(15&i)<<4|o>>2&15|0,e[c+2]=o<<6|a|0):u===m.PAD?e[c]=n<<2|i>>4|0:s===m.PAD&&(o=m.base64Alphabet[u],e[c]=n<<2|i>>4|0,e[c+1]=(15&i)<<4|o>>2&15|0),c+=3;return e},m.discardNonBase64=function(t){for(var e=[],r=0,n=0;n<t.length;n++)m.isBase64(t[n])&&(e[r++]=t[n]);var i=[];return b.arraycopy(e,0,i,0,r),i},m.CHUNK_SIZE=76,m.CHUNK_SEPARATOR="\r\n".split("").map(function(t){return t.charCodeAt(0)}),m.BASELENGTH=255,m.LOOKUPLENGTH=64,m.EIGHTBIT=8,m.SIXTEENBIT=16,m.TWENTYFOURBITGROUP=24,m.FOURBYTE=4,m.SIGN=-128,m.PAD="=".charCodeAt(0),m}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Array);"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var s,c,h=(function(t,e){!function(t,o){o=o&&o.hasOwnProperty("default")?o.default:o;var a=1e13,h=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var r,n,i=this.buf,o=i.length;for(r=0;r<o;++r)(n=i[r]*t+e)<a?e=0:n-=(e=0|n/a)*a,i[r]=n;0<e&&(i[r]=e)},t.prototype.sub=function(t){var e,r,n=this.buf,i=n.length;for(e=0;e<i;++e)t=(r=n[e]-t)<0?(r+=a,1):0,n[e]=r;for(;0===n[n.length-1];)n.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw"only base 10 is supported";for(var e=this.buf,r=e[e.length-1].toString(),n=e.length-2;0<=n;--n)r+=(a+e[n]).toString().substring(1);return r},t.prototype.valueOf=function(){for(var t=this.buf,e=0,r=t.length-1;0<=r;--r)e=e*a+t[r];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),c="Illegal argument specified!";function e(t,e){return t+("0"+e.toString(16)).slice(-2)}function r(t){return 0===t[0]?r(t.slice(1)):t}function n(t){if(!t)throw new Error(c);var e=t.match(/[0-9A-F]{2}/gi);if(!e)throw new Error(c);return new Uint8Array(e.map(function(t){return parseInt(t,16)}))}function u(t){try{return Promise.resolve(t())}catch(t){return Promise.reject(t)}}function l(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function p(t){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),String.fromCharCode.apply(String,t)}function s(t){try{if("object"==typeof window&&"function"==typeof window.atob)return window.atob(t);if("undefined"!=typeof Buffer)return Buffer.from(t,"base64").toString("binary");throw new Error(c)}catch(t){throw new Error(t)}}function g(t){if("string"!=typeof t||t.length%4!=0)throw new Error(c);return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function f(t){if("string"!=typeof t||t.length%4==1)throw new Error(c);for(;t.length%4!=0;)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function S(t){return s(f(t))}function d(t){try{if("object"==typeof window&&"function"==typeof window.atob)return window.btoa(t);if("undefined"!=typeof Buffer)return Buffer.from(t).toString("base64");throw new Error(c)}catch(t){throw new Error(t)}}function v(t){return g(d(t))}var E="â€¦",A=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,y=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function m(t,e){return t.length>e&&(t=t.substring(0,e)+E),t}var b=function(){function r(t,e){void 0===e&&(e=0),this.hexDigits="0123456789ABCDEF",t instanceof r?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=e)}return r.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},r.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},r.prototype.hexDump=function(t,e,r){for(var n="",i=t;i<e;++i)if(n+=this.hexByte(this.get(i)),!0!==r)switch(15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},r.prototype.isASCII=function(t,e){for(var r=t;r<e;++r){var n=this.get(r);if(n<32||176<n)return!1}return!0},r.prototype.parseStringISO=function(t,e){for(var r="",n=t;n<e;++n)r+=String.fromCharCode(this.get(n));return r},r.prototype.parseStringUTF=function(t,e){for(var r="",n=t;n<e;){var i=this.get(n++);r+=i<128?String.fromCharCode(i):191<i&&i<224?String.fromCharCode((31&i)<<6|63&this.get(n++)):String.fromCharCode((15&i)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},r.prototype.parseStringBMP=function(t,e){for(var r,n,i="",o=t;o<e;)r=this.get(o++),n=this.get(o++),i+=String.fromCharCode(r<<8|n);return i},r.prototype.parseTime=function(t,e,r){var n=this.parseStringISO(t,e),i=(r?A:y).exec(n);if(!i)return"Unrecognized time: "+n;if(r){var o=+i[1]<70?2e3:1900;i[1]=o+""}return n=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(n+=":"+i[5],i[6]&&(n+=":"+i[6],i[7]&&(n+="."+i[7]))),i[8]&&(n+=" UTC","Z"!=i[8]&&(n+=i[8],i[9]&&(n+=":"+i[9]))),n},r.prototype.parseInteger=function(t,e){for(var r,n=this.get(t),i=127<n,o=i?255:0,a="";n==o&&++t<e;)n=this.get(t);if(0==(r=e-t))return i?-1:0;if(4<r){var u=+n;for(r<<=3;0==(128&(u^o));)u<<=1,--r;a="("+r+" bit)\n"}i&&(n-=256);for(var s=new h(n),c=t+1;c<e;++c)s.mulAdd(256,this.get(c));return a+s.toString()},r.prototype.parseBitString=function(t,e,r){for(var n=this.get(t),i="("+((e-t-1<<3)-n)+" bit)\n",o="",a=t+1;a<e;++a){for(var u=this.get(a),s=a==e-1?n:0,c=7;s<=c;--c)o+=u>>c&1?"1":"0";if(o.length>r)return i+m(o,r)}return i+o},r.prototype.parseOctetString=function(t,e,r){if(this.isASCII(t,e))return m(this.parseStringISO(t,e),r);var n=e-t,i="("+n+" byte)\n";(r/=2)<n&&(e=t+r);for(var o=t;o<e;++o)i+=this.hexByte(this.get(o));return r<n&&(i+=E),i},r.prototype.parseOID=function(t,e,r){for(var n="",i=new h,o=0,a=t;a<e;++a){var u=this.get(a);if(i.mulAdd(128,127&u),o+=7,!(128&u)){if(""===n)if((i=i.simplify())instanceof h)i.sub(80),n="2."+i.toString();else{var s=i<80?i<40?0:1:2;n=s+"."+(i-40*s)}else n+="."+i.toString();if(n.length>r)return m(n,r);i=new h,o=0}}return 0<o&&(n+=".incomplete"),n},r}(),w=function(){function c(t,e,r,n,i){if(!(n instanceof C))throw"Invalid tag value.";this.stream=t,this.header=e,this.length=r,this.tag=n,this.sub=i}return c.decodeLength=function(t){var e=t.get(),r=127&e;if(r==e)return r;if(6<r)throw"Length over 48 bits not supported at position "+(t.pos-1);if(0==r)return null;for(var n=e=0;n<r;++n)e=256*e+t.get();return e},c.decode=function(r){r instanceof b||(r=new b(r,0));var t=new b(r),e=new C(r),n=c.decodeLength(r),i=null,o=r.pos,a=o-t.pos,u=function(){if(i=[],null!==n){for(var t=o+n;r.pos<t;)i[i.length]=c.decode(r);if(r.pos!=t)throw"Content size is not correct for container starting at offset "+o}else try{for(;;){var e=c.decode(r);if(e.tag.isEOC())break;i[i.length]=e}n=o-r.pos}catch(t){throw"Exception while decoding undefined length content: "+t}};if(e.tagConstructed)u();else if(e.isUniversal()&&(3==e.tagNumber||4==e.tagNumber))try{if(3==e.tagNumber&&0!=r.get())throw"BIT STRINGs with unused bits cannot encapsulate.";u();for(var s=0;s<i.length;++s)if(i[s].tag.isEOC())throw"EOC is not supposed to be actual content."}catch(t){i=null}if(null===i){if(null===n)throw"We can't skip over an invalid tag with undefined length at offset "+o;r.pos=o+Math.abs(n)}return new c(t,a,n,e,i)},c.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},c.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+r,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);case 6:return this.stream.parseOID(e,e+r,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return m(this.stream.parseStringUTF(e,e+r),t);case 18:case 19:case 20:case 21:case 22:case 26:return m(this.stream.parseStringISO(e,e+r),t);case 30:return m(this.stream.parseStringBMP(e,e+r),t);case 23:case 24:return this.stream.parseTime(e,e+r,23==this.tag.tagNumber)}return null},c.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},c.prototype.posStart=function(){return this.stream.pos},c.prototype.posContent=function(){return this.stream.pos+this.header},c.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},c.prototype.toHexString=function(t){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},c.prototype.getHex=function(){return this.stream.hexDump(this.posContent(),this.posEnd(),!0)},c.prototype.getAB=function(t){return void 0===t&&(t=!0),t?r(n(this.getHex())):n(this.getHex())},c}(),C=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber){for(var r=new h;e=t.get(),r.mulAdd(128,127&e),128&e;);this.tagNumber=r.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),N=function(t){var r=this;if("string"!=typeof t)throw new Error(c);this.type="public";var e=t.split("\n"),n=["-BEGIN PRIVATE KEY-","-END PRIVATE KEY-","-BEGIN EC PRIVATE KEY-","-END EC PRIVATE KEY-","-BEGIN RSA PRIVATE KEY-","-END RSA PRIVATE KEY-"],i=["-BEGIN RSA PUBLIC KEY-","-BEGIN EC PUBLIC KEY-","-BEGIN PUBLIC KEY-","-END PUBLIC KEY-","-END EC PUBLIC KEY-","-END RSA PUBLIC KEY-"],o=e.map(function(t){return t.trim()}).filter(function(t){return t.length&&function(e){return n.some(function(t){return-1<e.toUpperCase().indexOf(t)})?!(r.type="private"):!i.some(function(t){return-1<e.toUpperCase().indexOf(t)})}(t)}).join("");if(o.length)return this.body=l(s(f(o))),this;throw new Error(c)},O=[{name:"p-256",curve:"1.2.840.10045.3.1.7",coordinateLength:32},{name:"p-384",curve:"1.3.132.0.34",coordinateLength:48},{name:"p-384",curve:"1.3.132.0.35",coordinateLength:66}],i=function(){function i(){}return i.ASN1fromPEM=function(t){if(!t)throw new Error(c);t instanceof ArrayBuffer&&(t=new Uint8Array(t));var e=w.decode(t),r={};return 3===e.sub.length?(r.version=e.sub[0].content(),r.keyType=e.sub[1].sub[0].content(),r.namedCurve=e.sub[1].sub[1].content(),r.versionSub=e.sub[2].sub[0].sub[0].content(),r.privateKey=e.sub[2].sub[0].sub[2].getAB(),r.curveTypeSub=e.sub[2].sub[0].sub[2].sub[0].content(),r.publicKey=e.sub[2].sub[0].sub[3].sub[0].getAB()):2===e.sub.length&&(r.keyType=e.sub[0].sub[0].content(),r.namedCurve=e.sub[0].sub[1].content(),r.publicKey=e.sub[1].getAB()),e},i.JWKfromASN1=function(e,t,r){if(!e)throw new Error(c);if("private"===(t="string"==typeof t&&t.toLowerCase()||["public","private"][e.privateKey?1:0])&&!e.privateKey)throw new Error(c);var n=O.find(function(t){return t.curve===e.namedCurve});if(!n)throw new Error(c);var i=e.publicKey;if(4!==i.readInt8(0))throw new Error(c);var o=Object.assign({kty:"EC",crv:n.name},r,{x:v(p(i.slice(1,n.coordinateLength))),y:v(p(i.slice(n.coordinateLength+1,2*(n.coordinateLength+1))))});return"private"===t&&Object.assign(o,{d:v(p(e.privateKey))}),o},i.JWKfromEC=function(e,r,n){return u(function(){var t=new N(e);return i.JWKfromASN1(i.ASN1fromPEM(t.body),r,n)})},i}();function I(o,a,u,s){return new(u||(u=Promise))(function(t,e){function r(t){try{i(s.next(t))}catch(t){e(t)}}function n(t){try{i(s.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}i((s=s.apply(o,a||[])).next())})}function R(r,n){var i,o,a,t,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){u.label=e[1];break}if(6===e[0]&&u.label<a[1]){u.label=a[1],a=e;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(e);break}a[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var D="object"==typeof window&&(window.crypto||window.msCrypto),M=D&&(D.subtle||D.webkitSubtle||D.Subtle),P=function(){function s(){}return s.ASN1fromPEM=function(t){if(!t)throw new Error(c);t instanceof ArrayBuffer&&(t=new Uint8Array(t));var e=w.decode(t),r={};if(3===e.sub.length&&(e=e.sub[2].sub[0]),9===e.sub.length?(r.modulus=e.sub[1].getAB(),r.publicExponent=parseInt(e.sub[2].getHex(),16),r.privateExponent=e.sub[3].getAB(),r.prime1=e.sub[4].getAB(),r.prime2=e.sub[5].getAB(),r.exponent1=e.sub[6].getAB(),r.exponent2=e.sub[7].getAB(),r.coefficient=e.sub[8].getAB()):2===e.sub.length&&(e=e.sub[1].sub[0],r.modulus=e.sub[0].getAB(),r.publicExponent=parseInt(e.sub[1].getHex(),16)),r.bits=8*(r.modulus.length-1)+Math.ceil(Math.log(r.modulus[0]+1)/Math.log(2)),!r.bits)throw new Error(c);return r},s.JWKfromASN1=function(t,e,r){if(!t)throw new Error(c);if("private"===(e="string"==typeof e&&e.toLowerCase()||["public","private"][t.privateExponent?1:0])&&!t.privateExponent)throw new Error(c);var n=t.publicExponent,i=Math.ceil(Math.log(n)/Math.log(256)),o=new Uint8Array(i).map(function(t){return t=n%256,n=Math.floor(n/256),t}).reverse(),a=Object.assign({kty:"RSA"},r,{n:v(p(t.modulus)),e:v(p(o))});return"private"===e&&Object.assign(a,{d:v(p(t.privateExponent)),p:v(p(t.prime1)),q:v(p(t.prime2)),dp:v(p(t.exponent1)),dq:v(p(t.exponent2)),qi:v(p(t.coefficient))}),a},s.JWKfromRSA=function(e,r,n){return u(function(){var t=new N(e);return s.JWKfromASN1(s.ASN1fromPEM(t.body),r,n)})},s.createSigner=function(i){if(M)return{update:function(n){return{sign:function(e,t){return I(this,void 0,void 0,function(){var r=this;return R(this,function(t){return[2,s.JWKfromRSA(e,"private",{key_ops:["sign"],alg:i.replace("SHA-","RS")}).then(function(e){return I(r,void 0,void 0,function(){var r=this;return R(this,function(t){return[2,M.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:i}},!0,["sign"]).then(function(e){return I(r,void 0,void 0,function(){return R(this,function(t){return[2,M.sign({name:"RSASSA-PKCS1-v1_5",hash:{name:i}},e,l(n)).then(p).then(d)]})})})]})})})]})})}}}};if(o&&o.createSign)return o.createSign(i.replace("SHA-","RSA-SHA"));throw new Error(c)},s.sign=function(n){return function(e,r){return I(this,void 0,void 0,function(){return R(this,function(t){return[2,u(function(){return s.createSigner("SHA-"+n).then(function(t){return t.update(e).sign(r,"base64").then(g)})})]})})}},s.createVerifier=function(u){if(M)return{update:function(a){return{verify:function(e,o,t){return I(this,void 0,void 0,function(){var i=this;return R(this,function(t){return[2,s.JWKfromRSA(e,"public",{key_ops:["verify"],alg:u.replace("SHA-","RS")}).then(function(t){var e=t.kty,r=t.n,n=t.e;return I(i,void 0,void 0,function(){return R(this,function(t){return[2,M.importKey("jwk",{kty:e,n:r,e:n},{name:"RSASSA-PKCS1-v1_5",hash:{name:u}},!1,["verify"]).then(function(t){return M.verify("RSASSA-PKCS1-v1_5",t,l(S(o)),l(a))})]})})})]})})}}}};if(o&&o.createVerify)return o.createVerify(u.replace("SHA-","RSA-SHA"));throw new Error(c)},s.verify=function(o){return function(r,n,i){return I(this,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s.createVerifier("SHA-"+o).then(function(t){return t.update(r).verify(i,f(n),"base64")})];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(new Error(e.message))];case 3:return[2]}})})}},s}(),H="object"==typeof window&&(window.crypto||window.msCrypto),U=H&&(H.subtle||H.webkitSubtle||H.Subtle),B=function(){function f(){}return f.createSigner=function(r,n){return I(this,void 0,void 0,function(){var e;return R(this,function(t){return U?(e=l(n),[2,U.importKey("raw",e,{name:"HMAC",hash:{name:r}},!0,["sign"]).then(function(r){return{update:function(e){return I(this,void 0,void 0,function(){return R(this,function(t){return[2,U.sign("HMAC",r,l(e))]})})}}})]):[2,o&&o.createHmac?Promise.resolve(o.createHmac(r.replace("SHA-","sha"),n)):Promise.reject(H)]})})},f.sign=function(h){return function(s,c){return I(this,void 0,void 0,function(){var e,r,n,i,o,a,u;return R(this,function(t){switch(t.label){case 0:return[4,f.createSigner("SHA-"+h,c)];case 1:return e=t.sent(),n=(r=Promise).resolve,U?(o=v,a=p,(u=e)?[4,e.update(s)]:[3,3]):[3,4];case 2:u=t.sent(),t.label=3;case 3:return i=o.apply(void 0,[a.apply(void 0,[u])]),[3,5];case 4:i=g(e&&e.update(s).digest("base64")),t.label=5;case 5:return[2,n.apply(r,[i])]}})})}},f.verify=function(i){return function(e,r,n){return I(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,f.sign(i)(e,n)];case 1:return[2,t.sent()===r]}})})}},f}();t.ASN1=w,t.EC=i,t.PEM=N,t.RSA=P,t.HMAC=B,t.UNSUPPORTED_ALGORITHM='Unsupported algorithm name specified! Supported algorithms: "HS256", "HS384", "HS512", "RS256", "RS384", "RS512" and "none".',t.ILLEGAL_ARGUMENT=c,t.num2hex=e,t.cleanZeros=r,t.hex2AB=n,t.AB2hex=function(t){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t.reduce(e,"")},t.tryPromise=u,t.s2AB=l,t.AB2s=p,t.b2s=s,t.b2bu=g,t.bu2b=f,t.bu2s=S,t.s2b=d,t.s2bu=v,Object.defineProperty(t,"__esModule",{value:!0})}(e,r)}(s={exports:{}},s.exports),s.exports);(c=h)&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")&&c.default;var f=function(){function t(){}return t.privateKeyFromPKCS8=function(t){try{return(void 0)((void 0)(t),"private")}catch(t){throw new Error(t)}},t.publicKeyFrom=function(t){try{return(void 0)((void 0)(t),"public")}catch(t){throw new Error(t)}},t.EC="EC",t.SUNEC="SunEC",t}();function l(t,e){return!!t&&!!e&&t.toUpperCase()===e.toUpperCase()}var p,g,S,d,v=function(){function t(){this.str=""}return Object.defineProperty(t.prototype,"length",{get:function(){return this.str.length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.str},t.prototype.toNumber=function(){return+this.str},t.prototype.lastIndexOf=function(t){return this.str.lastIndexOf(t)},t.prototype.append=function(t){return t&&t.toString&&(this.str=this.str.concat(t.toString())),this},t.prototype.deleteCharAt=function(t){return this.str=this.str.slice(0,t)+this.str.slice(t+1,this.str.length),this},t.prototype.insert=function(t,e){return this.str=this.str.slice(0,t)+e+this.str.slice(t,this.str.length),this},t}();(g=p||(p={}))[g.NANOSECONDS=0]="NANOSECONDS",g[g.MICROSECONDS=1]="MICROSECONDS",g[g.MILLISECONDS=2]="MILLISECONDS",g[g.SECONDS=3]="SECONDS",g[g.MINUTES=4]="MINUTES",g[g.HOURS=5]="HOURS",g[g.DAYS=6]="DAYS",(d=S||(S={}))[d.NANOSECONDS=1]="NANOSECONDS",d[d.MICROSECONDS=1e3]="MICROSECONDS",d[d.MILLISECONDS=1e6]="MILLISECONDS",d[d.SECONDS=1e9]="SECONDS",d[d.MINUTES=6e10]="MINUTES",d[d.HOURS=36e11]="HOURS",d[d.DAYS=864e11]="DAYS";var E,A,w=function(){function e(t){this.timeUnit="NANOSECONDS",this.timeOrdinal=0,-1<e.ordinals().indexOf(t)?(this.timeOrdinal=t,this.timeUnit=p[t]):-1<e.values().indexOf(t)&&(this.timeOrdinal=e.values().indexOf(t),this.timeUnit=t)}return e.prototype.name=function(){return this.timeUnit},Object.defineProperty(e.prototype,"ordinal",{get:function(){return this.timeOrdinal},enumerable:!0,configurable:!0}),e.ordinals=function(){return Object.keys(p).filter(function(t){return"string"==typeof p[t]&&isFinite(+t)}).map(function(t){return parseInt(t)})},e.values=function(){return this.ordinals().map(function(t){return new e(t)})},e.prototype.valueOf=function(){return S[this.timeUnit]},e.prototype.toNanos=function(t){return e.NANOSECONDS.convert(t,this)},e.prototype.toMicros=function(t){return e.MICROSECONDS.convert(t,this)},e.prototype.toMillis=function(t){return e.MILLISECONDS.convert(t,this)},e.prototype.toSeconds=function(t){return e.SECONDS.convert(t,this)},e.prototype.toMinutes=function(t){return e.MINUTES.convert(t,this)},e.prototype.toHours=function(t){return e.HOURS.convert(t,this)},e.prototype.toDays=function(t){return e.DAYS.convert(t,this)},e.prototype.convert=function(t,e){return Math.trunc(t*e.valueOf()/this.valueOf())},e.NANOSECONDS=new e(p.NANOSECONDS),e.MICROSECONDS=new e(p.MICROSECONDS),e.MILLISECONDS=new e(p.MILLISECONDS),e.SECONDS=new e(p.SECONDS),e.MINUTES=new e(p.MINUTES),e.HOURS=new e(p.HOURS),e.DAYS=new e(p.DAYS),e}(),C=function(){function c(){}return c.formatNanos=function(t,e,r){return void 0===e&&(e=c.min()),void 0===r&&(r=c.max()),c.format(t,w.NANOSECONDS,e,r)},c.formatMillis=function(t,e,r){return void 0===e&&(e=c.min()),void 0===r&&(r=c.max()),c.format(t,w.MILLISECONDS,e,r)},c.format=function(t,e,r,n){void 0===r&&(r=c.min()),void 0===n&&(n=c.max());var i=new v,o="";t<0&&(t*=-1,o=" ago");for(var a=n;0<t;){var u=a.convert(t,e);if(0<u&&(t-=e.convert(u,a),i.append(u.toString()).append(" ").append(a.name().toLowerCase()),u<2&&i.deleteCharAt(i.length-1),i.append(", ")),a.ordinal===r.ordinal)break;a=w.values()[a.ordinal-1]}if(i.lastIndexOf(", ")<0)return"0 "+r.name().toLowerCase();i.deleteCharAt(i.length-1),i.deleteCharAt(i.length-1);var s=i.lastIndexOf(", ");return 0<s&&(i.deleteCharAt(s),i.insert(s," and")),i.append(o),i.toString()},c.formatHighest=function(t,e,r){void 0===r&&(r=this.min());for(var n=w.values(),i=new v,o=e;0<t;){var a=o.convert(t,w.MILLISECONDS);if(0<a){t-=o.toMillis(a),i.append(a.toString()).append(" ").append(o.name().toLowerCase()),a<2&&i.deleteCharAt(i.length-1);break}if(o.ordinal===r.ordinal)break;o=n[o.ordinal-1]}return i.toString()},c.max=function(){var t=w.values();return t[t.length-1]},c.min=function(){return w.values()[0]},c.abbreviateString=function(t){return t=(t=(t=(t=(t=t.replace(new RegExp(" days?","ig"),"d")).replace(new RegExp(" hours?","ig"),"hr")).replace(new RegExp(" minutes?","ig"),"m")).replace(new RegExp(" seconds?","ig"),"s")).replace(new RegExp(" milliseconds?","ig"),"ms")},c.abbreviate=function(t,e,r,n){if(void 0===r&&(r=c.min()),void 0===n&&(n=c.max()),e&&"number"==typeof t){var i=c.format(t,e,r,n);return c.abbreviateString(i)}if("string"==typeof t)return c.abbreviateString(t)},c}(),N=function(){function p(t,e){this.time=0,this.defaultErrorHandler=function(t){throw t},"string"!=typeof t&&t||("function"!=typeof e||1!=e.length)&&e?"number"!=typeof t&&t||"number"!=typeof e&&e?"number"==typeof t&&e instanceof w?(this.time=t,this.unit=e):this.invalidFormat(t,this.defaultErrorHandler):(this.time=t,this.unit=new w(e)):this.parseLongDuration(t,e)}return p.prototype.valueOf=function(){return this.time*this.unit.valueOf()},p.prototype.parseLongDuration=function(t,e){for(var r,n=t.split(new RegExp(",| and ","ig")),i=new p(0,w.MILLISECONDS),o=0;o<n.length;o++){for(var a=n[o],u=new p(0,w.MILLISECONDS),s=a.trim(),c=new v,h=new v,f=0;f<s.length;f++){var l=s.charAt(f);if(!(/\d/.test(l[0])||0===f&&(null==(r=l).charCodeAt?r:r.charCodeAt(0))=="-".charCodeAt(0)))break;c.append(l)}if(0===c.length)return void this.invalidFormat(s,this.defaultErrorHandler);for(;f<s.length;f++){l=s.charAt(f);if(!/[a-zA-Z ]/.test(l[0]))return void this.invalidFormat(s,this.defaultErrorHandler);h.append(l)}u.time=parseInt(c.toString()),u.unit=this.parseUnit(h.toString().trim(),this.defaultErrorHandler),null==u.unit&&(u.unit=w.MILLISECONDS),i=i.add(u)}this.time=i.time,this.unit=i.unit},p.prototype.getTime=function(t){return t.convert(this.time,this.unit)},p.prototype.equals=function(t){if(this===t)return!0;if(null==t||this.constructor!==t.constructor)return!1;var e=new p.Normalize(this,t);return e.a===e.b},p.prototype.hashCode=function(){var t=this.time^this.time>>>32|0;return t=31*t+this.unit.ordinal},p.prototype.add=function(t){var e=new p.Normalize(this,t);return new p(e.a+e.b,e.base)},p.prototype.subtract=function(t){var e=new p.Normalize(this,t);return new p(e.a-e.b,e.base)},p.prototype.invalidFormat=function(t,e){var r;"function"==typeof(r=e)?r(Object.defineProperty(new Error("Illegal duration format: '"+t+"'.  Valid examples are '10s' or '10 seconds'."),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]})):r.accept(Object.defineProperty(new Error("Illegal duration format: '"+t+"'.  Valid examples are '10s' or '10 seconds'."),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]}))},p.prototype.toString=function(){var t=new v;return t.append(this.time),null!=this.unit&&(t.append(" "),t.append(this.unit)),t.toString()},p.prototype.formatHighest=function(t){return void 0===t&&(t=C.max()),C.format(this.time,this.unit,w.MILLISECONDS,t)},p.prototype.parseUnit=function(t,e){return 0===t.length?null:l("NANOSECONDS",t)?w.NANOSECONDS:l("NANOSECOND",t)?w.NANOSECONDS:l("NANOS",t)?w.NANOSECONDS:l("NANO",t)?w.NANOSECONDS:l("NS",t)?w.NANOSECONDS:l("MICROSECONDS",t)?w.MICROSECONDS:l("MICROSECOND",t)?w.MICROSECONDS:l("MICROS",t)?w.MICROSECONDS:l("MICRO",t)?w.MICROSECONDS:l("MILLISECONDS",t)?w.MILLISECONDS:l("MILLISECOND",t)?w.MILLISECONDS:l("MILLIS",t)?w.MILLISECONDS:l("MILLI",t)?w.MILLISECONDS:l("MS",t)?w.MILLISECONDS:l("SECONDS",t)?w.SECONDS:l("SECOND",t)?w.SECONDS:l("SEC",t)?w.SECONDS:l("S",t)?w.SECONDS:l("MINUTES",t)?w.MINUTES:l("MINUTE",t)?w.MINUTES:l("MIN",t)?w.MINUTES:l("M",t)?w.MINUTES:l("HOURS",t)?w.HOURS:l("HOUR",t)?w.HOURS:l("HRS",t)?w.HOURS:l("HR",t)?w.HOURS:l("H",t)?w.HOURS:l("DAYS",t)?w.DAYS:l("DAY",t)?w.DAYS:l("D",t)?w.DAYS:(this.invalidFormat(t,e),null)},p}();E=N||(N={}),A=function(){function r(t,e){this.a=0,this.b=0,this.base=r.lowest(t,e),this.a=null==t.unit?t.time:this.base.convert(t.time,t.unit),this.b=null==e.unit?e.time:this.base.convert(e.time,e.unit)}return r.lowest=function(t,e){return 0===t.time||null==t.unit?e.unit:0===e.time||null==e.unit?t.unit:w.values()[Math.min(t.unit.ordinal,e.unit.ordinal)]},r}(),E.Normalize=A;var O=function(){function t(){}return t.join=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(0===e.length)return"";e[0]instanceof Array&&(e=e[0]);for(var n=new v,i=0,o=e;i<o.length;i++){var a=o[i];n.append(a).append(t)}return n.toString().substring(0,n.length-t.length)},t}(),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(y),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(y),D=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(y),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(y),P=function(){function t(){}return t.privateKeyFromPKCS8=function(t){try{return(void 0)((void 0)(t),"private")}catch(t){throw new Error(t)}},t.privateKeyFromPKCS1=function(t){try{return(void 0)((void 0)(t),"private")}catch(t){throw new Error(t)}},t.publicKeyFrom=function(t){try{return(void 0)((void 0)(t),"public")}catch(t){throw new Error(t)}},t.RSA="RSA",t}(),H=function(){function t(t){this.str=t.split(/\r?\n/),this.cursor=0}return t.prototype.readline=function(t){t&&(this.cursor=t);var e=this.str.length>this.cursor?this.str[this.cursor]:null;return this.cursor++,e},t}(),U=function(){function s(){}return s.readPrivateKey=function(t){for(var e=0,r=s.readPEMObjects(t);e<r.length;e++){var n=r[e];switch(n.getPEMObjectType()){case T.PRIVATE_KEY_PKCS:return P.privateKeyFromPKCS1(n.getDerBytes());case T.PRIVATE_EC_KEY_PKCS8:return f.privateKeyFromPKCS8(n.getDerBytes());case T.PRIVATE_KEY_PKCS8:try{return P.privateKeyFromPKCS8(n.getDerBytes())}catch(t){return f.privateKeyFromPKCS8(n.getDerBytes())}}}throw new Error("Found no private key")},s.readPublicKey=function(t){for(var e=0,r=s.readPEMObjects(t);e<r.length;e++){var n=r[e];switch(n.getPEMObjectType()){case T.PUBLIC_KEY_X509:try{return P.publicKeyFrom(n.getDerBytes())}catch(t){return f.publicKeyFrom(n.getDerBytes())}}}throw new Error("Found no private key")},s.readPEMObjects=function(t){var e=new H(t);try{for(var r=[],n=!1,i="",o="",a=new v,u=void 0;null!=(u=e.readline());)n?u.includes(o)?(r.push(new B(i,(void 0)(a.toString()))),n=!1):a.append(u.trim()):u.includes(s.BEGIN_MARKER)&&(n=!0,o=(i=u.trim()).replace("BEGIN","END"),a=new v);return r}finally{}},s.BEGIN_MARKER="-----BEGIN ",s}(),B=function(){function t(t,e){this.beginMarker=t,this.derBytes=e}return t.prototype.getBeginMarker=function(){return this.beginMarker},t.prototype.getDerBytes=function(){return this.derBytes[0]},t.prototype.getPEMObjectType=function(){return T.fromBeginMarker(this.beginMarker)},t}(),T=function(){function r(t){this.beginMarker=t,r.values=r.values || [],r.values.push(this)}return r.prototype.getBeginMarker=function(){return this.beginMarker},r.fromBeginMarker=function(e){return r.values.find(function(t){return t.getBeginMarker()===e})},r.PRIVATE_KEY_PKCS=new r("-----BEGIN RSA PRIVATE KEY-----"),r.PRIVATE_EC_KEY_PKCS8=new r("-----BEGIN EC PRIVATE KEY-----"),r.PRIVATE_KEY_PKCS8=new r("-----BEGIN PRIVATE KEY-----"),r.PUBLIC_KEY_X509=new r("-----BEGIN PUBLIC KEY-----"),r.CERTIFICATE_X509=new r("-----BEGIN CERTIFICATE-----"),r.values=[],r}(),K=function(r){function t(t,e){return r.call(this,t,e)||this}return i(t,r),t}(y),_=function(){function A(t,e,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];if(this.headers=["date"],null==t||0===t.trim().length)throw new Error("keyId is required.");if(null==e)throw new Error("algorithm is required.");this.keyId=t,this.algorithm=e,this.signature=r,0!==n.length&&(this.headers=this.lowercase(n)),this.headers=this.headers.slice(0)}return A.getAlgorithm=function(t){if(null==t)throw new Error("Algorithm cannot be null");return m.get(t)},A.prototype.lowercase=function(t){var e=[];for(var r in t)e.push(r.toLowerCase());return e},A.prototype.getKeyId=function(){return this.keyId},A.prototype.getAlgorithm=function(){return this.algorithm},A.prototype.getSignature=function(){return this.signature},A.prototype.getHeaders=function(){return this.headers},A.fromString=function(e){try{e=A.normalize(e);for(var t={},r={group:[]};null!==(r.group=this.RFC_2617_PARAM.exec(e));){var n=r.group[1].toLowerCase(),i=r.group[2];t.put(n,i)}var o=[],a=void 0===(v=t)[E="headers"]?null:v[E];null!=a&&(S=o,d=a.toLowerCase().split(" +").slice(0),S.push.apply(S,d));var u=void 0===(g=t).keyid?null:g.keyid;if(null==u)throw new R;var s=void 0===(l=t)[p="algorithm"]?null:l[p];if(null==s)throw new I;var c=void 0===(h=t)[f="signature"]?null:h[f];if(null==c)throw new M;return new A(u,m.get(s),c,o)}catch(t){if(null!=t&&t instanceof y)throw t;if(null!=t&&t instanceof Error)throw new K(e,t)}var h,f,l,p,g,S,d,v,E},A.normalize=function(t){var e,r,n="signature ",i=t.substring(0,n.length).toLowerCase();return r=n,((e=i)&&e.equals?e.equals(r):e===r)&&(t=t.substring(n.length)),t.trim()},A.prototype.toString=function(){return'Signature keyId="'+this.keyId+'",algorithm="'+this.algorithm+'",headers="'+O.join(" ",this.headers)+'",signature="'+this.signature+'"'},A.RFC_2617_PARAM=/(\\w+)=\"([^\"]*)\""/,A}(),L=function(){function c(){}return c.createSigningString=function(t,e,r,n){n=c.lowercase(n);for(var i=[],o=0,a=t;o<a.length;o++){var u=a[o];if("(request-target)"===u)e=c.lowercase(e),i.push(O.join(" ","(request-target):",e,r));else{var s=n[u];if(null==s)throw new D(u);i.push(u+": "+s)}}return O.join("\n",i)},c.lowercase$=function(n){return Object.keys(n).reduce(function(t,e){var r=n[e];return t[e.toLowerCase()]="object"==typeof r?c.lowercase$(r):r,t},{})},c.lowercase=function(t){return"string"==typeof t?t.toLowerCase():c.lowercase$(t)},c}();t.Algorithm=m,t.AuthenticationException=y,t.Base64=a,t.Collection=u,t.EC=f,t.Join=O,t.MissingAlgorithmException=I,t.MissingKeyIdException=R,t.MissingRequiredHeaderException=D,t.MissingSignatureException=M,t.BufferedReader=H,t.PEM=U,t.PEMObject=B,t.PEMObjectType=T,t.RSA=P,t.RuntimeException=e,t.System=b,t.Signature=_,t.Signatures=L,t.UnparsableSignatureException=K,t.UnsupportedAlgorithmException=o,Object.defineProperty(t,"__esModule",{value:!0})});
